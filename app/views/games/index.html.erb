<div class='row'>
  <div class='col-md-4'>
    <div class='grey-background'>
      <b>Total games:</b>
      <p><%= Game.count %></p>
      <b>Draws:</b>
      <p class='draw'><%= Game.draws.count %></p>
    </div>

  </div>
  <div class='col-md-4'>
    <div class='grey-background'>
      <table class='table table-condensed'>
        <thead>
          <tr>
            <th>Player</th>
            <th>Wins</th>
            <th>Goals</th>
          </tr>
        </thead>

        <% @players.each do |player| %>
          <tr class='<%= player.name.downcase %>'>
            <td><%= player.name %></td>
            <td><%= Game.wins_by(player).count %></td>
            <td><%= player.total_score %></p>
          </tr>
        <% end %>
      </table>
    </div>
  </div>

  <div class='col-md-4'>
    <table class='table table-condensed'>
      <thead>
        <tr class='grey-background'>
          <th>Top three wins</th>
        </tr>
      </thead>

      <% Game.biggest_wins(3).each do |game|  %>
        <tr>
          <td class = '<%= game.winner.name.downcase %>' >
            <%= game.winner.name %>
          </td>
        <% game.scores.order('score DESC').each do |score| %>
          <td class='<%= score.player.name.downcase %>'><%= score.score %></td>
        <% end %>
        </tr>
      <% end %>
    </table>
  </div>
</div>

<div class='row grey-background'>
  <table class='table table-condensed'>
  <h4>All games</h4>
  <div> <%= button_to 'Add a game', new_game_path, method: 'get', class: 'button button-info' %> </div>
    <thead>
      <tr class='grey-background'>
        <% @players.each do |player| %>
        <th><%= player.name %></th>
        <% end %>
        <th>Date</th>
      </tr>
    </thead>

    <tbody>
      <% @games.each_with_index do |game, index| %>
        <tr class=<%= game.winner.present? ? game.winner.name.downcase : 'draw' %>>
          <% @players.each do |player| %>
            <td class=<%= 'bold' if game.winner == player %>><%= game.score(player) %></td>
          <% end %>
          <td><%= game.date %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
